---
import BaseLayout from "../layouts/baseLayout.astro"
import Card from "../components/card.astro"
---

<BaseLayout>
  <div class="flex flex-col items-center h-screen w-full">
    <div class="flex flex-col justify-center px-12 max-w-5xl w-full h-full">
      <!-- <p class="text-2xl font-medium">Hello, I'm</p>
      <p class="text-6xl font-bold">Songhun Cho</p> -->
      <!-- <p class="text-2xl font-medium mt-2">[sʰʌŋhun tso]</p> -->
      <p class="text-7xl font-bold tracking-wide leading-[1.2] w-4/5">
        Creating websites <span class="bg-clip-text bg-gradient-to-r from-blue-500 to-indigo-500 text-transparent">with better UX</span> is my job.
      </p>
    </div>
  </div>
  <div class="flex flex-col items-center">
    <div class="max-w-5xl w-full flex flex-col px-24">
      <div class="py-32">
        <p class="text-5xl font-bold">My Projects</p>
        <p class="text-xl font-medium mt-4">Yes, these are my works.</p>
        <div class="flex flex-col items-center py-24 px-12 space-y-24">
          <Card />
          <Card />
          <Card />
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<script>
  import gsap from "gsap"
  import ScrollTrigger from "gsap/ScrollTrigger"

  gsap.registerPlugin(ScrollTrigger)

  const getRatio = (el: HTMLElement) =>
    window.innerHeight / (window.innerHeight + el.offsetHeight)

  gsap.utils.toArray("div").forEach((div, i) => {
    const section: HTMLDivElement = div as HTMLDivElement

    gsap.fromTo(
      section,
      {
        backgroundPosition: () =>
          i ? `50% ${-window.innerHeight * getRatio(section)}px` : "50% 0px",
      },
      {
        backgroundPosition: () =>
          `50% ${window.innerHeight * (1 - getRatio(section))}px`,
        ease: "none",
        scrollTrigger: {
          trigger: section,
          start: () => (i ? "top bottom" : "top top"),
          end: "bottom top",
          scrub: true,
          invalidateOnRefresh: true, // to make it responsive
        },
      }
    )
  })
</script>
